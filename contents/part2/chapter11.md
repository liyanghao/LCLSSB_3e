# 第11章 编写简单的shell脚本

本章的主要内容有：
- 使用多个命令
- 创建一个脚本文件
- 显示消息
- 使用变量
- 输入重定向和输出重定向
- 管道
- 数学运算
- 从脚本中退出

在介绍完Linux系统和命令行的基础知识后，现在开始编写shell脚本。本章介绍编写shell脚本的基础知识。在开始编写您的得意脚本之前，您需要知道这些基础知识。

## 11.1节 使用多个命令
截止目前，你已经知道如何使用命令行来输入命令和查看命令执行结果。

shell脚本的核心就是能输入多个命令，并处理每个命令执行的结果，甚至能将一个命令的结果传递给下一个命令。shell允许将多个命令串起来形成一个步骤。

如果想两个命令一起运行，则可以在同一行里输入两个命令，中间以分号分隔。
```
$ date ; who
```

恭喜您，您刚刚编写了一个shell脚本。这个简单的脚本只使用了两个bash shell命令。

date命令先运行，输出当前的日期和时间。
接着是who命令的运行结果，输出了当前有哪些人登录了该系统。

使用这种技术，你想串多少命令就串多少命令，直到达到了命令行的字符上限：255个字符。

这种技术适用于小型脚本，有个比较大的缺点：每次运行该脚本都需要输入整条命令。
解决办法是将多个命令整合到一个文本文件里。
当需要运行这些命令时，只需运行该文本文件即可。

## 11.2节 创建脚本文件
为了将多个shell命令放入一个文本文件，首先，需要使用一个文本编辑器来创建一个文件；然后，把命令输入到该文件里。

当创建shell脚本文件时，必须在第一行说明你使用的是什么类型的shell。
```
#!/bin/bash
```
在正常的shell脚本行里，`#`被用作表明这一行是注释行。

在shell脚本例，注释行是不被shell处理的。

但是shell脚本文件的第一行是一个特例：`#!`告诉shell要使用什么类型的shell来运行该脚本。

在表明使用的shell类型后，就可以向文件中输入命令了，每输入一个命令，后跟一个回车。
shell根据命令在文件中出现的顺序来处理命令。
shell不处理注释行。

范例1 编写名为test1的shell脚本
```
#!/bin/bash
# 这个脚本显示日期和登录到系统的用户
date
who
``` 
将上述脚本保存到名为test1的文件里。

如何运行test1脚本？
- 将该脚本文件所在的目录添加到环境变量PATH里;
- 使用绝对路径或者相对路径来引用该脚本文件;

使用方法二来运行test1脚本：
```
./test1
```
给该文件的拥有者添加可执行权限：
```
chmod u+x test1
```


