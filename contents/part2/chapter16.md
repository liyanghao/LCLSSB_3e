# 第16章 脚本控制
本章的主要内容有：
- 处理信号；
- 在后台运行脚本；
- 禁止hang-ups
- 控制作业
- 修改脚本优先级
- 自动执行脚本

当您开始构建高级脚本时，您可能想知道如何在Linux系统上运行和控制脚本。

截止现在，我们运行脚本的方式是实时地从命令行界面运行脚本。

在Linux系统里，这不是唯一的运行脚本的方式，还有其他运行脚本的方式，比如发送信号给您的脚本、修改脚本的优先级、当一个脚本在运行时切换它的运行模式等。

本章将介绍控制脚本运行的几种不同的方式。

## 第14.1节 处理信号
Linux系统使用信号来跟在系统里运行着的进程进行通信。第4章介绍了不同的Linux信号，及如何使用这些信号来停止、开始、杀死进程等。你可以通过脚本编程来控制脚本的运行：当脚本接收到具体的信号时，该执行哪些命令。

### 14.1.1节 给脚本发信号

默认情形：
- bash shell会忽略其接收到的任何`SIGQUIT(3)`信号和`SIGTERM(15)`信号。
- bash shell不会忽略其接收到的任何`SIGHUP(1)`信号和`SIGINT(2)`信号。

如果bash shell接收到一个`SIGHUP`信号，比如离开交互式的shell等，bash shell会退出。
在bash shell退出前，bash shell会将`SIGHUP`信号传递给由该shell开启的任何进程，包括任何运行着的脚本等。

如果bash shell接收到一个`SIGINT`信号，则该bash shell只是被中断了。Linux系统停止在CPU上给予该shell的处理时间。当这种情况发生时，shell会将`SIGINT`信号传递给由该shell开启的任何进程，并告知它们：系统不再该我们分配CPU时间了。

注意：
- shell将信号传递给了脚本程序，但是脚本程序的默认行为是不能控制这些信号的，这可能会对脚本的运行产生不利的影响；
- 您可以在脚本里编程来识别这些信号，并执行相应的命令来为这些信号的发生做好准备；

### 14.1.2节 生成信号
- ctrl+C组合键生成SIGINT信号
- ctrl+Z组合键生成SIGTSTP信号

#### 中断一个进程

#### 暂停一个进程

### 14.1.3 捕获信号

### 14.1.4 捕获一个脚本退出信号

### 14.1.5 修改或者移出一个捕获信号命令

## 14.2节 以后台模式运行脚本

## 14.6节 像发条一样运行

### `at`命令
### `cron`table


